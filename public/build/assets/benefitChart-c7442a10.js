import{C as B,a as U,L as k,B as C,b as x,p as S,c as Y}from"./chartjs-plugin-datalabels.esm-6f583e48.js";import{a as w}from"./chartjs-plugin-autocolors.esm-2149ea1c.js";import{g as P}from"./_commonjsHelpers-725317a4.js";const v=(t,e)=>{if(!t)t=e.replaceZeroDecimals?"-":"00";else{const o=e.floatingPoint-t.length;if(o>0)for(let a=0;a<e.floatingPoint-t.length;a++)t+="0";else o<0&&(t=t.slice(0,o))}return t},b=(t,e)=>{const o=t.split("."),a=o[0].length;let n=o[0].split("");for(let l=a-1;l>=0;l--)(a-l)%3===0&&l>0&&(n[l]=e.dot+n[l]);const r=n.join("");if(e.removeZeroDecimals&&!o[1])return r;{const l=v(o[1]||null,e);return e.floatingPoint>0?r+e.decimal+l:r}},h=(t,e)=>(e.symbol==="Rp"?t=e.formal?"Rp"+t:"Rp "+t:e.symbol==="IDR"&&(t=e.formal?t+" IDR":"IDR "+t),t),R=(t,e)=>{const o=e.longUnit?["ribu","juta","milyar","triliun"]:[e.k?"k":"rb","jt","M","T"],a=Math.ceil(t.length/3)-2;let n=null;if(a>=0&&a<4){let r=o[a];e.spaceBeforeUnit&&(r=" "+r);const l=t.length%3,i=l===0?3:l;n=t.substr(0,i),n+=(a>=0&&e.floatingPoint>0?e.decimal:"")+t.substr(i,e.floatingPoint)+r}else n=b(t,e);return n},L={symbol:"Rp",formal:!0,dot:".",decimal:",",floatingPoint:2,replaceZeroDecimals:!1,removeZeroDecimals:!1,k:!1,useUnit:!1,longUnit:!1,spaceBeforeUnit:!1};var $=function(e,o={}){return e=typeof e!="string"?e.toString():e,o=Object.assign({},L,o),o.useUnit?h(R(e,o),o):h(b(e,o),o)};const c=P($);B.register(U,k,C,x,S,Y,w);const A=JSON.parse(document.getElementById("chartDataAkumulasiBenefit").dataset.labels),M=JSON.parse(document.getElementById("chartDataAkumulasiBenefit").dataset.data),N=JSON.parse(document.getElementById("chartDataAkumulasiBenefit").dataset.logos),y={id:"customImagePlugin",afterDraw:(t,e,o)=>{const{ctx:a,chartArea:n,scales:r}=t;t.data.labels.forEach((l,i)=>{const s=r.y;r.x;const E=s.getPixelForValue(i),I=n.left-40;if(u[i]){const d=u[i],D=d.width/d.height,p=30,g=p/D;a.drawImage(d,I,E-g/2,p,g)}})}},u=[];let f;const m=async(t=A,e=M,o=N)=>{try{await Promise.all(o.map((n,r)=>new Promise((l,i)=>{const s=new Image;s.onload=()=>{u[r]=s,l()},s.onerror=i,s.src=n}))),f&&f.destroy();const a=document.getElementById("benefitChart").getContext("2d");f=new B(a,{type:"bar",data:{labels:t,datasets:[{label:"Benefit",data:e}]},options:{indexAxis:"y",layout:{padding:{left:50}},scales:{y:{ticks:{display:!1}},x:{beginAtZero:!0,ticks:{callback:function(n){return c(n,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}}}},plugins:{legend:{display:!1},autocolors:{mode:"data"},tooltip:{callbacks:{title:n=>t[n[0].dataIndex],label:n=>`Nilai: ${c(e[n.dataIndex],{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}`}},datalabels:{formatter:n=>c(n,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1}),color:"black",anchor:"center",align:"right",font:{weight:"regular",size:15}},customImagePlugin:y}},plugins:[y]})}catch(a){console.error("Error initializing chart:",a)}};m();document.addEventListener("DOMContentLoaded",()=>{let t=null,e=null;document.querySelectorAll(".start-year-option").forEach(a=>{a.addEventListener("click",function(n){n.preventDefault(),t=this.dataset.startyear,document.getElementById("startYearDropdown").textContent=`Start Year: ${t}`})}),document.querySelectorAll(".end-year-option").forEach(a=>{a.addEventListener("click",function(n){n.preventDefault(),e=this.dataset.endyear,document.getElementById("endYearDropdown").textContent=`End Year: ${e}`})}),document.getElementById("applyYearFilter").addEventListener("click",function(){if(!t||!e){new bootstrap.Modal(document.getElementById("noYearValue")).show();return}if(t>e){new bootstrap.Modal(document.getElementById("invalidYearModal")).show(),t=null,e=null,document.getElementById("startYearDropdown").textContent="Start Year",document.getElementById("endYearDropdown").textContent="End Year";return}fetch(`/dashboard/benefit-chart-data?startYear=${t}&endYear=${e}`).then(a=>a.json()).then(a=>{m(a.labels,a.data,a.logos)}).catch(a=>console.error("Error fetching chart data:",a))}),m();const o=document.getElementById("financialBenefitsData");if(o){const a=JSON.parse(o.dataset.benefits),n=JSON.parse(o.dataset.potentialBenefits),r=document.getElementById("financialBenefits");a.forEach(i=>{const s=document.createElement("div");s.className="financial-benefit-item",s.innerHTML=`
                <span class="financial-benefit-year">${i.year}</span>
                <span class="financial-benefit-total">
                ${c(i.total,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}

                </span>
            `,r.appendChild(s)});const l=document.getElementById("potentialBenefits");n.forEach(i=>{const s=document.createElement("div");s.className="financial-benefit-item",s.innerHTML=`
                <span class="financial-benefit-year">${i.year}</span>
                <span class="financial-benefit-total">
                ${c(i.total,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}

                </span>
            `,l.appendChild(s)})}});
